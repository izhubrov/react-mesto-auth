{"version":3,"sources":["images/headerlogo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ImagePopup.js","components/ErrorPopup.js","utils/api.js","utils/utils.js","components/App.js","index.js"],"names":["Header","React","memo","className","src","headerLogo","alt","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardButtonRemoveClassName","isLiked","likes","some","userWhoLiked","cardButtonLikeClassName","link","name","onClick","type","aria-label","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","style","backgroundImage","avatar","about","map","Footer","PopupWithForm","title","buttonSubmitText","children","isOpen","onClose","onSubmit","buttonSubmitState","noValidate","disabled","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","isNameInputValid","setNameInputValid","isAboutInputValid","setAboutInputValid","nameValidationMessage","setNameValidationMessage","aboutValidationMessage","setAboutValidationMessage","setButtonSubmitState","useEffect","evt","preventDefault","value","placeholder","required","minLength","maxLength","onChange","inputElement","target","validity","valid","validationMessage","EditAvatarPopup","onUpdateAvatar","setLink","isLinkInputValid","setLinkInputValid","linkValidationMessage","setLinkValidationMessage","isLinkInputInitial","setLinkInputInitial","AddPlacePopup","isNameInputInitial","setNameInputInitial","ConfirmDeletePopup","onSubmitDelete","ImagePopup","ErrorPopup","errorText","isActive","api","baseUrl","groupId","token","this","_baseUrl","_groupId","_token","res","ok","json","Promise","reject","status","fetch","headers","authorization","then","_checkResponse","user","method","body","JSON","stringify","likeCardStatus","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isConfirmDeletePopupOpen","setConfirmDeletePopupOpen","selectedCard","setSelectedCard","error","setError","setCurrentUser","setCards","submitTextProfilePopup","setSubmitTextProfilePopup","submitTextAvatarPopup","setSubmitTextAvatarPopup","submitTextAddPlacePopup","setSubmitTextAddPlacePopup","submitTextConfirmDeletePopup","setSubmitTextConfirmDeletePopup","cardToRemove","setCardToRemove","checkImage","resolve","img","document","createElement","onload","onerror","remove","closeAllPopups","setErrorPopup","err","active","all","getUserInfo","getCards","userData","catch","setTimeout","handleOverlayClick","classList","contains","addEventListener","removeEventListener","handleEscapeClick","key","Provider","changeLikeCardStatus","cardWithChangedLike","cardFromState","setUserInfo","updatedUser","changeAvatar","postCard","newCard","deleteCard","filter","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.7a57cefc.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/headerlogo.bbe2a6ea.svg\";","import React from \"react\";\r\nimport headerLogo from \"../images/headerlogo.svg\";\r\n\r\nconst Header = React.memo(()=>{\r\n  return (\r\n    <header className=\"header page__container\">\r\n      <img\r\n        className=\"header__logo\"\r\n        src={headerLogo}\r\n        alt=\"Логотип сайта с надписью Место Россия английскими буквами\"\r\n      />\r\n    </header>\r\n  );\r\n})\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardButtonRemoveClassName = `cards__btn-remove ${isOwn ? 'cards__btn-remove_active': ''}`;\r\n\r\n  const isLiked = card.likes.some((userWhoLiked)=>userWhoLiked._id === currentUser._id);\r\n  const cardButtonLikeClassName = `cards__btn-like ${isLiked ? 'cards__btn-like_active': ''}`;\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"cards__item\">\r\n      <img\r\n        className=\"cards__image\"\r\n        src={`${card.link}`}\r\n        alt={`Изображение ${card.name}`}\r\n        onClick={handleClick}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Удалить\"\r\n        className={cardButtonRemoveClassName}\r\n        onClick={handleDeleteClick}\r\n      ></button>\r\n      <div className=\"cards__description\">\r\n        <h2 className=\"cards__title text-cut\">{card.name}</h2>\r\n        <div className=\"cards__likes-container\">\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Нравится\"\r\n            className={cardButtonLikeClassName}\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <div className=\"cards__likes-counter\">{card.likes.length}</div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport \"../index.css\";\r\nimport Card from \"./Card.js\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Main({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete }) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile page__container\">\r\n        <div\r\n          className=\"profile__avatar\"\r\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n          onClick={onEditAvatar}\r\n        ></div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__container\">\r\n            <h1 className=\"profile__name text-cut\">{currentUser.name}</h1>\r\n            <button type=\"button\" aria-label=\"Редактировать\" className=\"profile__btn-edit\" onClick={onEditProfile}></button>\r\n          </div>\r\n          <p className=\"profile__about text-cut\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" aria-label=\"Добавить\" className=\"profile__btn-add\" onClick={onAddPlace}> </button>\r\n      </section>\r\n\r\n      <section className=\"places page__container\">\r\n        <ul className=\"cards\">\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card key={card._id} card={card} onCardClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete}/>\r\n            );\r\n          })}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nconst Footer = React.memo(()=>{\r\n  return (\r\n    <footer className=\"footer page__container\">\r\n      <p className=\"footer__author\">&copy; 2021 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n})\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm({ title, name, buttonSubmitText, children, isOpen, onClose, onSubmit, buttonSubmitState }) {\r\n\r\n  return (\r\n    <div className={`popup ${isOpen ? \"popup_opened\" : \"\"}`}>\r\n      <div className=\"popup__container popup__container_form\">\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        <button type=\"button\" aria-label=\"Закрыть\" className=\"popup__btn-close\" onClick={onClose}></button>\r\n        <form className=\"popup__form\" name={`form-edit-${name}`} onSubmit={onSubmit} noValidate>\r\n          {children}\r\n          <button type=\"submit\" className={`popup__btn-submit ${!buttonSubmitState ? 'popup__btn-submit_inactive' :''}`} disabled={!buttonSubmitState ? true :''}>{buttonSubmitText}</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, buttonSubmitText }) {\r\n  const [name, setName] = React.useState(\"Name\");\r\n  const [description, setDescription] = React.useState(\"About\");\r\n  const [isNameInputValid, setNameInputValid] = React.useState(true);\r\n  const [isAboutInputValid, setAboutInputValid] = React.useState(true);\r\n  const [nameValidationMessage, setNameValidationMessage] = React.useState('');\r\n  const [aboutValidationMessage, setAboutValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    if(currentUser.name && currentUser.about) {\r\n      setName(currentUser.name);\r\n      setDescription(currentUser.about);\r\n    }\r\n    setNameInputValid(true);\r\n    setAboutInputValid(true);\r\n  }, [currentUser, isOpen]);\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n    checkNameValidation(evt.target);\r\n  }\r\n\r\n  function handleChangeAbout(evt) {\r\n    setDescription(evt.target.value);\r\n    checkAboutValidation(evt.target);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser({name, about: description})\r\n  }\r\n\r\n  //Валидация формы\r\n  React.useEffect(()=> {\r\n    if (isNameInputValid && isAboutInputValid) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isNameInputValid, isAboutInputValid]);\r\n\r\n  function checkNameValidation(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      setNameInputValid(false);\r\n      setNameValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setNameInputValid(true);\r\n    }\r\n  }\r\n\r\n  function checkAboutValidation(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      setAboutInputValid(false);\r\n      setAboutValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setAboutInputValid(true);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Редактировать профиль\"\r\n      name=\"profile\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={name}\r\n            placeholder=\"Имя\"\r\n            className={`popup__input ${!isNameInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            onChange={handleChangeName}\r\n          />\r\n          <span className={`popup__input-error ${!isNameInputValid ? 'popup__input-error_active' : ''}`}>{nameValidationMessage}</span>\r\n        </label>\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"about\"\r\n            value={description}\r\n            placeholder=\"О себе\"\r\n            className={`popup__input ${!isAboutInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            onChange={handleChangeAbout}\r\n          />\r\n          <span className={`popup__input-error ${!isAboutInputValid ? 'popup__input-error_active' : ''}`}>{aboutValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar, buttonSubmitText }) {\r\n  const [link, setLink] = React.useState('');\r\n  const [isLinkInputValid, setLinkInputValid] = React.useState(true);\r\n  const [linkValidationMessage, setLinkValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n  const [isLinkInputInitial, setLinkInputInitial] = React.useState(true);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateAvatar({avatar: link});\r\n  }\r\n\r\n  //Валидация формы\r\n  function handleChange(evt) {\r\n    setLink(evt.target.value);\r\n    if (!evt.target.validity.valid) {\r\n      setLinkInputInitial(false);\r\n      setLinkInputValid(false);\r\n      setLinkValidationMessage(evt.target.validationMessage);\r\n    } else {\r\n      setLinkInputInitial(false);\r\n      setLinkInputValid(true);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setLinkInputValid(true);\r\n    setButtonSubmitState(false);\r\n    setLinkInputInitial(true);\r\n    setLink('');\r\n  }, [isOpen]);\r\n\r\n  React.useEffect(()=> {\r\n    if (isLinkInputValid && !isLinkInputInitial) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isLinkInputValid, isLinkInputInitial]);\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Обновить аватар\"\r\n      name=\"avatar\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            value={link}\r\n            type=\"url\"\r\n            name=\"link\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`popup__input ${!isLinkInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`popup__input-error ${!isLinkInputValid ? 'popup__input-error_active' : ''}`}>{linkValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, buttonSubmitText }) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n  const [isNameInputValid, setNameInputValid] = React.useState(true);\r\n  const [isLinkInputValid, setLinkInputValid] = React.useState(true);\r\n  const [nameValidationMessage, setNameValidationMessage] = React.useState('');\r\n  const [linkValidationMessage, setLinkValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n  const [isNameInputInitial, setNameInputInitial] = React.useState(true);\r\n  const [isLinkInputInitial, setLinkInputInitial] = React.useState(true);\r\n\r\n  function handleAddPlaceSubmit(evt) {\r\n    evt.preventDefault();\r\n    onAddPlace({ name, link });\r\n  }\r\n\r\n  function handleChangeTitle(evt) {\r\n    setName(evt.target.value);\r\n    checkNameValidation(evt.target);\r\n  }\r\n\r\n  function handleChangeLink(evt) {\r\n    setLink(evt.target.value);\r\n    checkLinkValidation(evt.target);\r\n  }\r\n\r\n  //Валидация формы\r\n  React.useEffect(() => {\r\n    setName('');\r\n    setLink('');\r\n    setNameInputValid(true);\r\n    setLinkInputValid(true);\r\n    setButtonSubmitState(false);\r\n    setNameInputInitial(true);\r\n    setLinkInputInitial(true);\r\n  }, [isOpen]);\r\n\r\n  React.useEffect(()=> {\r\n    if (isNameInputValid && isLinkInputValid && !isNameInputInitial && !isLinkInputInitial) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isNameInputValid, isLinkInputValid, isNameInputInitial, isLinkInputInitial ]);\r\n\r\n  function checkNameValidation(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      setNameInputInitial(false);\r\n      setNameInputValid(false);\r\n      setNameValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setNameInputInitial(false);\r\n      setNameInputValid(true);\r\n    }\r\n  }\r\n\r\n  function checkLinkValidation(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      setLinkInputInitial(false);\r\n      setLinkInputValid(false);\r\n      setLinkValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setLinkInputInitial(false);\r\n      setLinkInputValid(true);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Новое место\"\r\n      name=\"card\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleAddPlaceSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={name}\r\n            placeholder=\"Название\"\r\n            className={`popup__input ${!isNameInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"30\"\r\n            onChange={handleChangeTitle}\r\n          />\r\n          <span className={`popup__input-error ${!isNameInputValid ? 'popup__input-error_active' : ''}`}>{nameValidationMessage}</span>\r\n        </label>\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"url\"\r\n            name=\"link\"\r\n            value={link}\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`popup__input ${!isLinkInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            onChange={handleChangeLink}\r\n          />\r\n          <span className={`popup__input-error ${!isLinkInputValid ? 'popup__input-error_active' : ''}`}>{linkValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction ConfirmDeletePopup({isOpen, onClose, card, onSubmitDelete, buttonSubmitText }) {\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onSubmitDelete(card);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Вы уверены?\"\r\n      name=\"remove\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState=\"true\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmDeletePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_img ${\r\n        card.link ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"popup__btn-close\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <figure className=\"popup__figure\">\r\n          <img className=\"popup__image\" src={`${card.link}`} alt={`Изображение ${card.name}`} />\r\n          <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from \"react\";\r\n\r\nfunction ErrorPopup({ errorText, isActive }) {\r\n  return (\r\n    <div className={`error-popup ${isActive ? \"error-popup_opened\" : \"\"} `}>\r\n      <h2 className=\"error-popup__title\">Что-то пошло не так...</h2>\r\n      <p className=\"error-popup__text\">{errorText}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorPopup;\r\n","import { apiSettings } from \"./utils.js\";\r\nclass Api {\r\n  constructor({ baseUrl, groupId, token }) {\r\n    this._baseUrl = baseUrl;\r\n    this._groupId = groupId;\r\n    this._token = token;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/users/me`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  setUserInfo(user) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: user.name,\r\n        about: user.about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  postCard(card) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: card.name,\r\n        link: card.link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  deleteCard(card) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards/${card._id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(card, likeCardStatus) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards/likes/${card._id}`, {\r\n      method: (likeCardStatus ? \"PUT\": \"DELETE\"),\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCountsOfLikes(card) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards/likes/${card._id}`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeAvatar(link) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api(apiSettings);\r\nexport default api;\r\n","const apiSettings = {\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1\",\r\n  groupId: \"cohort-22\",\r\n  token: \"a835ebe3-157b-4140-922b-a5f49168fcac\",\r\n};\r\n\r\nexport { apiSettings };\r\n","import React from \"react\";\r\nimport \"../index.css\";\r\nimport Header from \"./Header.js\";\r\nimport Main from \"./Main.js\";\r\nimport Footer from \"./Footer.js\";\r\nimport EditProfilePopup from \"./EditProfilePopup.js\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup.js\";\r\nimport AddPlacePopup from \"./AddPlacePopup.js\";\r\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup.js\";\r\nimport ImagePopup from \"./ImagePopup.js\";\r\nimport ErrorPopup from \"./ErrorPopup.js\";\r\nimport api from \"../utils/api.js\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\n\r\nfunction App() {\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [error, setError] = React.useState({ errorText: \"\", isActive: false });\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [submitTextProfilePopup, setSubmitTextProfilePopup] = React.useState('Сохранить');\r\n  const [submitTextAvatarPopup, setSubmitTextAvatarPopup] = React.useState('Сохранить');\r\n  const [submitTextAddPlacePopup, setSubmitTextAddPlacePopup] = React.useState('Сохранить');\r\n  const [submitTextConfirmDeletePopup, setSubmitTextConfirmDeletePopup] = React.useState('Да');\r\n  const [cardToRemove, setCardToRemove] = React.useState({});\r\n\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getUserInfo(), api.getCards()])\r\n      .then(([userData, cards]) => {\r\n        setCurrentUser(userData);\r\n        setCards(cards);\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }, []);\r\n\r\n  function handleUpdateUser(user) {\r\n    setSubmitTextProfilePopup('Сохранение...');\r\n    api\r\n      .setUserInfo(user)\r\n      .then((updatedUser) => {\r\n        setCurrentUser({\r\n          ...currentUser,\r\n          name: updatedUser.name,\r\n          about: updatedUser.about,\r\n        });\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    checkImage(avatar)\r\n      .then(() => {\r\n        setSubmitTextAvatarPopup('Сохранение...');\r\n        api\r\n          .changeAvatar(avatar)\r\n          .then((updatedUser) => {\r\n            setCurrentUser({ ...currentUser, avatar: updatedUser.avatar });\r\n            closeAllPopups();\r\n          })\r\n      })\r\n      .catch(() => {\r\n        setErrorPopup('Ошибка адреса', true);\r\n        setTimeout(() => setErrorPopup('Ошибка адреса', false), 5000);\r\n      });\r\n  }\r\n\r\n  function checkImage(link) {\r\n    return new Promise((resolve, reject) => {\r\n      const img = document.createElement('img');\r\n      img.src = link;\r\n      img.onload = resolve;\r\n      img.onerror = reject;\r\n      img.remove();\r\n    })\r\n  }\r\n\r\n  function handleAddCard(card) {\r\n    checkImage(card.link)\r\n      .then(() => {\r\n        setSubmitTextAddPlacePopup('Добавление...');\r\n        api.postCard(card)\r\n          .then((newCard) => {\r\n            setCards([newCard, ...cards]);\r\n            closeAllPopups();\r\n          })\r\n      })\r\n      .catch(() => {\r\n        setErrorPopup('Ошибка адреса', true);\r\n        setTimeout(() => setErrorPopup('Ошибка адреса', false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(\r\n      (userWhoLiked) => userWhoLiked._id === currentUser._id\r\n    );\r\n    api\r\n      .changeLikeCardStatus(card, !isLiked)\r\n      .then((cardWithChangedLike) => {\r\n        setCards(\r\n          cards.map((cardFromState) =>\r\n            cardFromState._id === card._id ? cardWithChangedLike : cardFromState\r\n          )\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    setSubmitTextConfirmDeletePopup('Удаление...');\r\n    api\r\n      .deleteCard(card)\r\n      .then(() => {\r\n        setCards(\r\n          cards.filter((cardFromState) => cardFromState._id !== card._id)\r\n        );\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setSubmitTextAvatarPopup('Сохранить');\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setSubmitTextProfilePopup('Сохранить');\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setSubmitTextAddPlacePopup('Добавить');\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function confirmCardDelete(card) {\r\n    setSubmitTextConfirmDeletePopup('Да');\r\n    setCardToRemove(card);\r\n    setConfirmDeletePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setEditAvatarPopupOpen(false);\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setConfirmDeletePopupOpen(false);\r\n    setSelectedCard({});\r\n    setCardToRemove({});\r\n  }\r\n\r\n  function setErrorPopup(err, active) {\r\n    setError({ ...error, errorText: err, isActive: active });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    function handleOverlayClick(evt) {\r\n      if (evt.target.classList.contains('popup')) {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleOverlayClick);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleOverlayClick);\r\n    }\r\n\r\n  },[]);\r\n\r\n  React.useEffect(() => {\r\n    function handleEscapeClick(evt) {\r\n      if (evt.key ==='Escape') {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    document.addEventListener('keyup', handleEscapeClick);\r\n\r\n    return () => {\r\n      document.removeEventListener('keyup', handleEscapeClick);\r\n    }\r\n\r\n  },[]);\r\n\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header />\r\n        <Main\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onEditAvatar={handleEditAvatarClick}\r\n          onCardClick={handleCardClick}\r\n          cards={cards}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={confirmCardDelete}\r\n        />\r\n        <Footer />\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          buttonSubmitText={submitTextProfilePopup}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          buttonSubmitText={submitTextAvatarPopup}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddCard}\r\n          buttonSubmitText={submitTextAddPlacePopup}\r\n        />\r\n\r\n        <ConfirmDeletePopup\r\n          isOpen={isConfirmDeletePopupOpen}\r\n          card={cardToRemove}\r\n          onClose={closeAllPopups}\r\n          onSubmitDelete={handleCardDelete}\r\n          buttonSubmitText={submitTextConfirmDeletePopup}\r\n        />\r\n\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n\r\n        <ErrorPopup errorText={error.errorText} isActive={error.isActive} />\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.querySelector('.root')\r\n);\r\n"],"sourceRoot":""}