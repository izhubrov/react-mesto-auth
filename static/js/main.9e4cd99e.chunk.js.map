{"version":3,"sources":["images/headerlogo.svg","components/Header.js","components/PopupWithForm.js","components/CssLoader.js","components/Login.js","components/Register.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ImagePopup.js","components/ErrorPopup.js","components/InfoToolTip.js","utils/api.js","utils/utils.js","components/ProtectedRoute.js","components/App.js","index.js"],"names":["Header","isLoggedIn","userEmail","onSignOut","isLoading","location","useLocation","isLocationSignIn","pathname","isLocationMain","React","useState","isColumnMenu","setColumnMenu","className","src","headerLogo","alt","onClick","type","aria-label","activeClassName","to","PopupWithForm","title","name","buttonSubmitText","children","isOpen","onClose","onSubmit","buttonSubmitState","isAuthForm","isToolTipForm","isSuccess","isLocationSignUp","noValidate","disabled","CssLoader","memo","Login","onLogin","email","setEmail","password","setPassword","isEmailInputValid","setEmailInputValid","isPasswordInputValid","setPasswordInputValid","emailValidationMessage","setEmailValidationMessage","passwordValidationMessage","setPasswordValidationMessage","setButtonSubmitState","isEmailInputInitial","setEmailInputInitial","isPasswordInputInitial","setPasswordInputInitial","useEffect","evt","preventDefault","value","placeholder","required","minLength","maxLength","onChange","inputElement","target","validity","valid","validationMessage","Register","onRegister","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardButtonRemoveClassName","isLiked","likes","some","userWhoLiked","cardButtonLikeClassName","link","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","style","backgroundImage","avatar","about","map","Footer","EditProfilePopup","onUpdateUser","setName","description","setDescription","isNameInputValid","setNameInputValid","isAboutInputValid","setAboutInputValid","nameValidationMessage","setNameValidationMessage","aboutValidationMessage","setAboutValidationMessage","EditAvatarPopup","onUpdateAvatar","setLink","isLinkInputValid","setLinkInputValid","linkValidationMessage","setLinkValidationMessage","isLinkInputInitial","setLinkInputInitial","AddPlacePopup","isNameInputInitial","setNameInputInitial","ConfirmDeletePopup","onSubmitDelete","ImagePopup","ErrorPopup","errorText","isActive","InfoToolTip","api","baseUrl","groupId","token","authUrl","this","_baseUrl","_groupId","_token","_authUrl","res","ok","json","Promise","reject","status","fetch","headers","authorization","then","_checkResponse","user","method","body","JSON","stringify","likeCardStatus","ProtectedRoute","Component","component","props","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isConfirmDeletePopupOpen","setConfirmDeletePopupOpen","isInfoToolTipPopupOpen","setInfoToolTipPopupOpen","isSuccessInfoToolTip","setIsSuccessInfoToolTip","selectedCard","setSelectedCard","error","setError","setCurrentUser","setUserEmail","userPassword","setUserPassword","setCards","submitTextProfilePopup","setSubmitTextProfilePopup","submitTextAvatarPopup","setSubmitTextAvatarPopup","submitTextAddPlacePopup","setSubmitTextAddPlacePopup","submitTextConfirmDeletePopup","setSubmitTextConfirmDeletePopup","cardToRemove","setCardToRemove","setIsLoggedIn","setIsLoading","history","useHistory","checkImage","resolve","img","document","createElement","onload","onerror","remove","closeInfoToolTipPopup","closeAllPopups","handleLogin","setErrorPopup","err","active","handleCheckToken","jwt","localStorage","getItem","checkToken","data","push","catch","login","setItem","all","getUserInfo","getCards","userData","setTimeout","handleOverlayClick","classList","contains","addEventListener","removeEventListener","handleEscapeClick","key","Provider","removeItem","exact","path","changeLikeCardStatus","cardWithChangedLike","cardFromState","register","setUserInfo","updatedUser","changeAvatar","postCard","newCard","deleteCard","filter","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.9e4cd99e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/headerlogo.bbe2a6ea.svg\";","import React from \"react\";\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\nimport headerLogo from \"../images/headerlogo.svg\";\r\n\r\n\r\nfunction Header({isLoggedIn, userEmail, onSignOut, isLoading}) {\r\n\r\n  const location = useLocation();\r\n  const isLocationSignIn = location.pathname === '/sign-in';\r\n  const isLocationMain = location.pathname === '/';\r\n  const [isColumnMenu, setColumnMenu] = React.useState(false);\r\n\r\n  function handleSignOut() {\r\n    onSignOut();\r\n    setColumnMenu(false);\r\n  }\r\n\r\n  function handleSignIn() {\r\n  }\r\n\r\n  function handleMenuClick() {\r\n    setColumnMenu(true);\r\n  }\r\n\r\n  function handleCloseMenu() {\r\n    setColumnMenu(false);\r\n  }\r\n\r\n  return (\r\n    <header className={`header ${!isColumnMenu ? \"page__container\" : \"\"} ${isColumnMenu ? \"header_columned\" : \"\"}`}>\r\n      <div className={`header__logo-container ${isColumnMenu ? \"header__logo-container_type_column\" : \"\"}`}>\r\n      <img\r\n        className=\"header__logo appear\"\r\n        src={headerLogo}\r\n        alt=\"Логотип сайта с надписью Место Россия английскими буквами\"\r\n      />\r\n      <button onClick={handleCloseMenu} type=\"button\" aria-label=\"Закрыть меню\" className={`header__btn-close ${isColumnMenu ? \"header__btn-close_type_active\" : \"\"}`}></button>\r\n      </div>\r\n      <div onClick={handleMenuClick} className= {`header__btn-menu ${(!isLoggedIn || isColumnMenu) ? \"header__btn-menu_type_inactive\" : \"\"}`}>\r\n        <div className=\"header__burger-line\"></div>\r\n        <div className=\"header__burger-line\"></div>\r\n        <div className=\"header__burger-line\"></div>\r\n      </div>\r\n      { !isLoading &&\r\n      <nav className={`header__nav-container appear ${isLoggedIn && !isColumnMenu ? \"header__nav-container_type_inactive\" : \"\"} ${isColumnMenu ? \"header__nav-container_type_column\" : \"\"} `}>\r\n        <p className=\"header__email\">{isLoggedIn ? userEmail : \"\"}</p>\r\n          {!isLocationSignIn ?\r\n          <NavLink onClick={!isLoggedIn ? handleSignIn : handleSignOut} className={`header__nav-item ${isLocationMain ? \"header__nav-item_active\" : \"\"}`} to={\"/sign-in\"}>{isLoggedIn ? \"Выйти\" : \"Войти\"}</NavLink>\r\n          :\r\n          <NavLink className=\"header__nav-item\" activeClassName=\"header_nav-item_active\" to={\"/sign-up\"}>{!isLoggedIn ? \"Регистрация\" : \"\"}</NavLink>\r\n          }\r\n      </nav>\r\n      }\r\n\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nfunction PopupWithForm({\r\n  title,\r\n  name,\r\n  buttonSubmitText,\r\n  children,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  buttonSubmitState,\r\n  isAuthForm,\r\n  isToolTipForm,\r\n  isSuccess\r\n}) {\r\n  const location = useLocation();\r\n  const isLocationSignUp = location.pathname === \"/sign-up\";\r\n\r\n  return (\r\n    <div\r\n      className={`popup ${isAuthForm ? \"popup_type_auth appear\" : \"\"} ${\r\n        isOpen ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div\r\n        className={`popup__container ${\r\n          !isAuthForm ? \"popup__container_form\" : \"popup__container_auth page__container\"\r\n        }`}\r\n      >\r\n        {isToolTipForm && <div className={`popup__tooltip-image ${!isSuccess ? \"popup__tooltip-image_type_fail\" : \"\"}`}></div>}\r\n        <h2 className={`popup__title ${(isToolTipForm || isAuthForm) ? \"popup__title_place_auth\" : \"\"}`}>{title}</h2>\r\n        {!isAuthForm && (\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Закрыть\"\r\n            className={`popup__btn-close ${isToolTipForm ? \"popup__btn-close_place_tooltip\" : \"\"}`}\r\n            onClick={onClose}\r\n          ></button>\r\n        )}\r\n        <form\r\n          className=\"popup__form\"\r\n          name={`form-edit-${name}`}\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n        >\r\n          {children}\r\n          {\r\n            !isToolTipForm &&\r\n            <button\r\n            type=\"submit\"\r\n            className={`popup__btn-submit ${\r\n              isAuthForm ? \"popup__btn-submit_type_auth\" : \"\"\r\n            } ${!buttonSubmitState ? \"popup__btn-submit_inactive\" : \"\"}`}\r\n            disabled={!buttonSubmitState ? true : \"\"}\r\n            >\r\n            {buttonSubmitText}\r\n          </button>\r\n          }\r\n          {(isLocationSignUp && !isToolTipForm) && (\r\n            <div className=\"popup__auth-container\">\r\n              <p className=\"popup__auth-text\">Уже зарегистрированы?&nbsp;</p>\r\n              <Link className=\"popup__auth-link\" to={\"/sign-in\"}>Войти</Link>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nconst CssLoader = React.memo(({isLoading})=>{\r\n  return (\r\n    isLoading && (\r\n      <div className=\"cssload\">\r\n        <div className=\"cssload__whirlpool\"></div>\r\n      </div>\r\n      )\r\n  );\r\n})\r\n\r\nexport default CssLoader;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport CssLoader from \"./CssLoader.js\";\r\n\r\nfunction Login({ isOpen, onLogin, buttonSubmitText, isLoading }) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [isEmailInputValid, setEmailInputValid] = React.useState(true);\r\n  const [isPasswordInputValid, setPasswordInputValid] = React.useState(true);\r\n  const [emailValidationMessage, setEmailValidationMessage] = React.useState('');\r\n  const [passwordValidationMessage, setPasswordValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n  const [isEmailInputInitial, setEmailInputInitial] = React.useState(true);\r\n  const [isPasswordInputInitial, setPasswordInputInitial] = React.useState(true);\r\n\r\n\r\n  React.useEffect(() => {\r\n    setButtonSubmitState(false);\r\n    setEmailInputValid(true);\r\n    setPasswordInputValid(true);\r\n  }, [isOpen]);\r\n\r\n  function handleChangeEmail(evt) {\r\n    setEmail(evt.target.value);\r\n    checkEmailValidation(evt.target);\r\n  }\r\n\r\n  function handleChangePassword(evt) {\r\n    setPassword(evt.target.value);\r\n    checkPasswordValidation(evt.target);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onLogin({email, password})\r\n  }\r\n\r\n  //Валидация формы\r\n  React.useEffect(()=> {\r\n    if (isEmailInputValid && isPasswordInputValid && !isEmailInputInitial && !isPasswordInputInitial) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isEmailInputValid, isPasswordInputValid, isEmailInputInitial, isPasswordInputInitial ]);\r\n\r\n  function checkEmailValidation(inputElement) {\r\n    setEmailInputInitial(false);\r\n    if (!inputElement.validity.valid) {\r\n      setEmailInputValid(false);\r\n      setEmailValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setEmailInputValid(true);\r\n    }\r\n  }\r\n\r\n  function checkPasswordValidation(inputElement) {\r\n    setPasswordInputInitial(false);\r\n    if (!inputElement.validity.valid) {\r\n      setPasswordInputValid(false);\r\n      setPasswordValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setPasswordInputValid(true);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    <CssLoader isLoading={isLoading} />\r\n    {!isLoading && \r\n    <PopupWithForm\r\n      title=\"Вход\"\r\n      name=\"login\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n      isAuthForm= {true}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={email}\r\n            placeholder=\"Email\"\r\n            className={`popup__input popup__input_type_auth ${!isEmailInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            onChange={handleChangeEmail}\r\n          />\r\n          <span className={`popup__input-error ${!isEmailInputValid ? 'popup__input-error_active' : ''}`}>{emailValidationMessage}</span>\r\n        </label>\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            placeholder=\"Пароль\"\r\n            className={`popup__input popup__input_type_auth ${!isPasswordInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"8\"\r\n            maxLength=\"40\"\r\n            onChange={handleChangePassword}\r\n          />\r\n          <span className={`popup__input-error ${!isPasswordInputValid ? 'popup__input-error_active' : ''}`}>{passwordValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n    }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction Register({ isOpen, onRegister, buttonSubmitText }) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [isEmailInputValid, setEmailInputValid] = React.useState(true);\r\n  const [isPasswordInputValid, setPasswordInputValid] = React.useState(true);\r\n  const [emailValidationMessage, setEmailValidationMessage] = React.useState('');\r\n  const [passwordValidationMessage, setPasswordValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n  const [isEmailInputInitial, setEmailInputInitial] = React.useState(true);\r\n  const [isPasswordInputInitial, setPasswordInputInitial] = React.useState(true);\r\n\r\n\r\n  React.useEffect(() => {\r\n    setButtonSubmitState(false);\r\n    setEmailInputValid(true);\r\n    setPasswordInputValid(true);\r\n  }, [isOpen]);\r\n\r\n  function handleChangeEmail(evt) {\r\n    setEmail(evt.target.value);\r\n    checkEmailValidation(evt.target);\r\n  }\r\n\r\n  function handleChangePassword(evt) {\r\n    setPassword(evt.target.value);\r\n    checkPasswordValidation(evt.target);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onRegister({email, password});\r\n  }\r\n\r\n  //Валидация формы\r\n  React.useEffect(()=> {\r\n    if (isEmailInputValid && isPasswordInputValid && !isEmailInputInitial && !isPasswordInputInitial) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isEmailInputValid, isPasswordInputValid, isEmailInputInitial, isPasswordInputInitial ]);\r\n\r\n  function checkEmailValidation(inputElement) {\r\n    setEmailInputInitial(false);\r\n    if (!inputElement.validity.valid) {\r\n      setEmailInputValid(false);\r\n      setEmailValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setEmailInputValid(true);\r\n    }\r\n  }\r\n\r\n  function checkPasswordValidation(inputElement) {\r\n    setPasswordInputInitial(false);\r\n    if (!inputElement.validity.valid) {\r\n      setPasswordInputValid(false);\r\n      setPasswordValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setPasswordInputValid(true);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Регистрация\"\r\n      name=\"register\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n      isAuthForm= {true}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={email}\r\n            placeholder=\"Email\"\r\n            className={`popup__input popup__input_type_auth ${!isEmailInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            onChange={handleChangeEmail}\r\n          />\r\n          <span className={`popup__input-error ${!isEmailInputValid ? 'popup__input-error_active' : ''}`}>{emailValidationMessage}</span>\r\n        </label>\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            placeholder=\"Пароль\"\r\n            className={`popup__input popup__input_type_auth ${!isPasswordInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"8\"\r\n            maxLength=\"40\"\r\n            onChange={handleChangePassword}\r\n          />\r\n          <span className={`popup__input-error ${!isPasswordInputValid ? 'popup__input-error_active' : ''}`}>{passwordValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardButtonRemoveClassName = `cards__btn-remove ${isOwn ? 'cards__btn-remove_active': ''}`;\r\n\r\n  const isLiked = card.likes.some((userWhoLiked)=>userWhoLiked._id === currentUser._id);\r\n  const cardButtonLikeClassName = `cards__btn-like ${isLiked ? 'cards__btn-like_active appear': ''}`;\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"cards__item appear\">\r\n      <img\r\n        className=\"cards__image\"\r\n        src={`${card.link}`}\r\n        alt={`Изображение ${card.name}`}\r\n        onClick={handleClick}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Удалить\"\r\n        className={cardButtonRemoveClassName}\r\n        onClick={handleDeleteClick}\r\n      ></button>\r\n      <div className=\"cards__description\">\r\n        <h2 className=\"cards__title text-cut\">{card.name}</h2>\r\n        <div className=\"cards__likes-container\">\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Нравится\"\r\n            className={cardButtonLikeClassName}\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <div className=\"cards__likes-counter appear\">{card.likes.length}</div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport \"../index.css\";\r\nimport Card from \"./Card.js\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Main({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete }) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile page__container\">\r\n        <div\r\n          className=\"profile__avatar appear\"\r\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n          onClick={onEditAvatar}\r\n        ></div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__container\">\r\n            <h1 className=\"profile__name appear text-cut\">{currentUser.name}</h1>\r\n            <button type=\"button\" aria-label=\"Редактировать\" className=\"profile__btn-edit\" onClick={onEditProfile}></button>\r\n          </div>\r\n          <p className=\"profile__about appear text-cut\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" aria-label=\"Добавить\" className=\"profile__btn-add\" onClick={onAddPlace}> </button>\r\n      </section>\r\n\r\n      <section className=\"places page__container\">\r\n        <ul className=\"cards\">\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card key={card._id} card={card} onCardClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete}/>\r\n            );\r\n          })}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nconst Footer = React.memo(({isLoggedIn})=>{\r\n  return (\r\n      isLoggedIn && (\r\n      <footer className=\"footer page__container\">\r\n      <p className=\"footer__author\">&copy; 2021 Mesto Russia</p>\r\n      </footer>\r\n      )\r\n  );\r\n})\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, buttonSubmitText }) {\r\n  const [name, setName] = React.useState(\"Name\");\r\n  const [description, setDescription] = React.useState(\"About\");\r\n  const [isNameInputValid, setNameInputValid] = React.useState(true);\r\n  const [isAboutInputValid, setAboutInputValid] = React.useState(true);\r\n  const [nameValidationMessage, setNameValidationMessage] = React.useState('');\r\n  const [aboutValidationMessage, setAboutValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    if(currentUser.name && currentUser.about) {\r\n      setName(currentUser.name);\r\n      setDescription(currentUser.about);\r\n    }\r\n    setNameInputValid(true);\r\n    setAboutInputValid(true);\r\n  }, [currentUser, isOpen]);\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n    checkNameValidation(evt.target);\r\n  }\r\n\r\n  function handleChangeAbout(evt) {\r\n    setDescription(evt.target.value);\r\n    checkAboutValidation(evt.target);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser({name, about: description})\r\n  }\r\n\r\n  //Валидация формы\r\n  React.useEffect(()=> {\r\n    if (isNameInputValid && isAboutInputValid) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isNameInputValid, isAboutInputValid]);\r\n\r\n  function checkNameValidation(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      setNameInputValid(false);\r\n      setNameValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setNameInputValid(true);\r\n    }\r\n  }\r\n\r\n  function checkAboutValidation(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      setAboutInputValid(false);\r\n      setAboutValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setAboutInputValid(true);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Редактировать профиль\"\r\n      name=\"profile\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={name}\r\n            placeholder=\"Имя\"\r\n            className={`popup__input ${!isNameInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            onChange={handleChangeName}\r\n          />\r\n          <span className={`popup__input-error ${!isNameInputValid ? 'popup__input-error_active' : ''}`}>{nameValidationMessage}</span>\r\n        </label>\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"about\"\r\n            value={description}\r\n            placeholder=\"О себе\"\r\n            className={`popup__input ${!isAboutInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            onChange={handleChangeAbout}\r\n          />\r\n          <span className={`popup__input-error ${!isAboutInputValid ? 'popup__input-error_active' : ''}`}>{aboutValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar, buttonSubmitText }) {\r\n  const [link, setLink] = React.useState('');\r\n  const [isLinkInputValid, setLinkInputValid] = React.useState(true);\r\n  const [linkValidationMessage, setLinkValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n  const [isLinkInputInitial, setLinkInputInitial] = React.useState(true);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateAvatar({avatar: link});\r\n  }\r\n\r\n  //Валидация формы\r\n  function handleChange(evt) {\r\n    setLink(evt.target.value);\r\n    if (!evt.target.validity.valid) {\r\n      setLinkInputInitial(false);\r\n      setLinkInputValid(false);\r\n      setLinkValidationMessage(evt.target.validationMessage);\r\n    } else {\r\n      setLinkInputInitial(false);\r\n      setLinkInputValid(true);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setLinkInputValid(true);\r\n    setButtonSubmitState(false);\r\n    setLinkInputInitial(true);\r\n    setLink('');\r\n  }, [isOpen]);\r\n\r\n  React.useEffect(()=> {\r\n    if (isLinkInputValid && !isLinkInputInitial) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isLinkInputValid, isLinkInputInitial]);\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Обновить аватар\"\r\n      name=\"avatar\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            value={link}\r\n            type=\"url\"\r\n            name=\"link\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`popup__input ${!isLinkInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`popup__input-error ${!isLinkInputValid ? 'popup__input-error_active' : ''}`}>{linkValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, buttonSubmitText }) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n  const [isNameInputValid, setNameInputValid] = React.useState(true);\r\n  const [isLinkInputValid, setLinkInputValid] = React.useState(true);\r\n  const [nameValidationMessage, setNameValidationMessage] = React.useState('');\r\n  const [linkValidationMessage, setLinkValidationMessage] = React.useState('');\r\n  const [buttonSubmitState, setButtonSubmitState] = React.useState(false);\r\n  const [isNameInputInitial, setNameInputInitial] = React.useState(true);\r\n  const [isLinkInputInitial, setLinkInputInitial] = React.useState(true);\r\n\r\n  function handleAddPlaceSubmit(evt) {\r\n    evt.preventDefault();\r\n    onAddPlace({ name, link });\r\n  }\r\n\r\n  function handleChangeTitle(evt) {\r\n    setName(evt.target.value);\r\n    checkNameValidation(evt.target);\r\n  }\r\n\r\n  function handleChangeLink(evt) {\r\n    setLink(evt.target.value);\r\n    checkLinkValidation(evt.target);\r\n  }\r\n\r\n  //Валидация формы\r\n  React.useEffect(() => {\r\n    setName('');\r\n    setLink('');\r\n    setNameInputValid(true);\r\n    setLinkInputValid(true);\r\n    setButtonSubmitState(false);\r\n    setNameInputInitial(true);\r\n    setLinkInputInitial(true);\r\n  }, [isOpen]);\r\n\r\n  React.useEffect(()=> {\r\n    if (isNameInputValid && isLinkInputValid && !isNameInputInitial && !isLinkInputInitial) {\r\n      setButtonSubmitState(true);\r\n    } else {\r\n      setButtonSubmitState(false);\r\n    }\r\n  }, [isNameInputValid, isLinkInputValid, isNameInputInitial, isLinkInputInitial ]);\r\n\r\n  function checkNameValidation(inputElement) {\r\n    setNameInputInitial(false);\r\n    if (!inputElement.validity.valid) {\r\n      setNameInputValid(false);\r\n      setNameValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setNameInputValid(true);\r\n    }\r\n  }\r\n\r\n  function checkLinkValidation(inputElement) {\r\n    setLinkInputInitial(false);\r\n    if (!inputElement.validity.valid) {\r\n      setLinkInputValid(false);\r\n      setLinkValidationMessage(inputElement.validationMessage);\r\n    } else {\r\n      setLinkInputValid(true);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Новое место\"\r\n      name=\"card\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleAddPlaceSubmit}\r\n      buttonSubmitState={buttonSubmitState}\r\n    >\r\n      <fieldset className=\"popup__set\">\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={name}\r\n            placeholder=\"Название\"\r\n            className={`popup__input ${!isNameInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"30\"\r\n            onChange={handleChangeTitle}\r\n          />\r\n          <span className={`popup__input-error ${!isNameInputValid ? 'popup__input-error_active' : ''}`}>{nameValidationMessage}</span>\r\n        </label>\r\n        <label className=\"popup__field\">\r\n          <input\r\n            type=\"url\"\r\n            name=\"link\"\r\n            value={link}\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`popup__input ${!isLinkInputValid ? 'popup__input_type_error' : ''}`}\r\n            required\r\n            onChange={handleChangeLink}\r\n          />\r\n          <span className={`popup__input-error ${!isLinkInputValid ? 'popup__input-error_active' : ''}`}>{linkValidationMessage}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction ConfirmDeletePopup({isOpen, onClose, card, onSubmitDelete, buttonSubmitText }) {\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onSubmitDelete(card);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Вы уверены?\"\r\n      name=\"remove\"\r\n      buttonSubmitText={buttonSubmitText}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState=\"true\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmDeletePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_img ${\r\n        card.link ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"popup__btn-close\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <figure className=\"popup__figure\">\r\n          <img className=\"popup__image\" src={`${card.link}`} alt={`Изображение ${card.name}`} />\r\n          <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from \"react\";\r\n\r\nfunction ErrorPopup({ errorText, isActive }) {\r\n  return (\r\n    <div className={`error-popup ${isActive ? \"error-popup_opened\" : \"\"} `}>\r\n      <h2 className=\"error-popup__title\">Что-то пошло не так...</h2>\r\n      <p className=\"error-popup__text\">{errorText}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction InfoToolTip({isOpen, isSuccess, onClose, isToolTipForm}) {\r\n  return (\r\n    <PopupWithForm\r\n      title= {isSuccess? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте еще раз.\"}\r\n      name=\"infoToolTip\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      isToolTipForm={isToolTipForm}\r\n      isSuccess={isSuccess}\r\n    >\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default InfoToolTip;\r\n","import { apiSettings } from \"./utils.js\";\r\nclass Api {\r\n  constructor({ baseUrl, groupId, token, authUrl }) {\r\n    this._baseUrl = baseUrl;\r\n    this._groupId = groupId;\r\n    this._token = token;\r\n    this._authUrl = authUrl;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/users/me`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  setUserInfo(user) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: user.name,\r\n        about: user.about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  postCard(card) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: card.name,\r\n        link: card.link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  deleteCard(card) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards/${card._id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(card, likeCardStatus) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards/likes/${card._id}`, {\r\n      method: (likeCardStatus ? \"PUT\": \"DELETE\"),\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCountsOfLikes(card) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/cards/likes/${card._id}`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeAvatar(link) {\r\n    return fetch(`${this._baseUrl}/${this._groupId}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  register({email, password}) {\r\n    return fetch(`${this._authUrl}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  login({email, password}) {\r\n    return fetch(`${this._authUrl}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._authUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api(apiSettings);\r\nexport default api;\r\n","const apiSettings = {\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1\",\r\n  groupId: \"cohort-22\",\r\n  token: \"a835ebe3-157b-4140-922b-a5f49168fcac\",\r\n  authUrl: \"https://auth.nomoreparties.co\",\r\n};\r\n\r\nexport { apiSettings };\r\n","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({ component: Component, ...props }) {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React from \"react\";\r\nimport {\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n  useHistory,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport \"../index.css\";\r\nimport Header from \"./Header.js\";\r\nimport Login from \"./Login.js\";\r\nimport Register from \"./Register.js\";\r\nimport Main from \"./Main.js\";\r\nimport Footer from \"./Footer.js\";\r\nimport EditProfilePopup from \"./EditProfilePopup.js\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup.js\";\r\nimport AddPlacePopup from \"./AddPlacePopup.js\";\r\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup.js\";\r\nimport ImagePopup from \"./ImagePopup.js\";\r\nimport ErrorPopup from \"./ErrorPopup.js\";\r\nimport InfoToolTip from \"./InfoToolTip\";\r\nimport api from \"../utils/api.js\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\nimport ProtectedRoute from \"./ProtectedRoute.js\";\r\n\r\nfunction App() {\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(\r\n    false\r\n  );\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = React.useState(\r\n    false\r\n  );\r\n\r\n  const [isInfoToolTipPopupOpen, setInfoToolTipPopupOpen] = React.useState(\r\n    false\r\n  );\r\n  const [isSuccessInfoToolTip, setIsSuccessInfoToolTip] = React.useState(null);\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [error, setError] = React.useState({ errorText: \"\", isActive: false });\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [userEmail, setUserEmail] = React.useState(\"\");\r\n  const [userPassword, setUserPassword] = React.useState(\"\");\r\n  const [cards, setCards] = React.useState([]);\r\n  const [submitTextProfilePopup, setSubmitTextProfilePopup] = React.useState(\"Сохранить\");\r\n  const [submitTextAvatarPopup, setSubmitTextAvatarPopup] = React.useState(\"Сохранить\");\r\n  const [submitTextAddPlacePopup, setSubmitTextAddPlacePopup] = React.useState(\"Сохранить\");\r\n  const [submitTextConfirmDeletePopup,setSubmitTextConfirmDeletePopup,] = React.useState(\"Да\");\r\n  const [cardToRemove, setCardToRemove] = React.useState({});\r\n  const [isLoggedIn, setIsLoggedIn] = React.useState(null);\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  React.useEffect(() => {\r\n    handleCheckToken();\r\n    setIsSuccessInfoToolTip(false);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getUserInfo(), api.getCards()])\r\n      .then(([userData, cards]) => {\r\n        setCurrentUser(userData);\r\n        setCards(cards);\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }, []);\r\n\r\n  function handleUpdateUser(user) {\r\n    setSubmitTextProfilePopup(\"Сохранение...\");\r\n    api\r\n      .setUserInfo(user)\r\n      .then((updatedUser) => {\r\n        setCurrentUser({\r\n          ...currentUser,\r\n          name: updatedUser.name,\r\n          about: updatedUser.about,\r\n        });\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    checkImage(avatar)\r\n      .then(() => {\r\n        setSubmitTextAvatarPopup(\"Сохранение...\");\r\n        api.changeAvatar(avatar).then((updatedUser) => {\r\n          setCurrentUser({ ...currentUser, avatar: updatedUser.avatar });\r\n          closeAllPopups();\r\n        });\r\n      })\r\n      .catch(() => {\r\n        setErrorPopup(\"Ошибка адреса\", true);\r\n        setTimeout(() => setErrorPopup(\"Ошибка адреса\", false), 5000);\r\n      });\r\n  }\r\n\r\n  function checkImage(link) {\r\n    return new Promise((resolve, reject) => {\r\n      const img = document.createElement(\"img\");\r\n      img.src = link;\r\n      img.onload = resolve;\r\n      img.onerror = reject;\r\n      img.remove();\r\n    });\r\n  }\r\n\r\n  function handleAddCard(card) {\r\n    checkImage(card.link)\r\n      .then(() => {\r\n        setSubmitTextAddPlacePopup(\"Добавление...\");\r\n        api.postCard(card).then((newCard) => {\r\n          setCards([newCard, ...cards]);\r\n          closeAllPopups();\r\n        });\r\n      })\r\n      .catch(() => {\r\n        setErrorPopup(\"Ошибка адреса\", true);\r\n        setTimeout(() => setErrorPopup(\"Ошибка адреса\", false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(\r\n      (userWhoLiked) => userWhoLiked._id === currentUser._id\r\n    );\r\n    api\r\n      .changeLikeCardStatus(card, !isLiked)\r\n      .then((cardWithChangedLike) => {\r\n        setCards(\r\n          cards.map((cardFromState) =>\r\n            cardFromState._id === card._id ? cardWithChangedLike : cardFromState\r\n          )\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    setSubmitTextConfirmDeletePopup(\"Удаление...\");\r\n    api\r\n      .deleteCard(card)\r\n      .then(() => {\r\n        setCards(\r\n          cards.filter((cardFromState) => cardFromState._id !== card._id)\r\n        );\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setSubmitTextAvatarPopup(\"Сохранить\");\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setSubmitTextProfilePopup(\"Сохранить\");\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setSubmitTextAddPlacePopup(\"Добавить\");\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function confirmCardDelete(card) {\r\n    setSubmitTextConfirmDeletePopup(\"Да\");\r\n    setCardToRemove(card);\r\n    setConfirmDeletePopupOpen(true);\r\n  }\r\n\r\n  function closeInfoToolTipPopup() {\r\n    closeAllPopups();\r\n    if (isSuccessInfoToolTip) {\r\n      handleLogin({ email: userEmail, password: userPassword });\r\n    }\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setEditAvatarPopupOpen(false);\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setConfirmDeletePopupOpen(false);\r\n    setInfoToolTipPopupOpen(false);\r\n    setSelectedCard({});\r\n    setCardToRemove({});\r\n  }\r\n\r\n  function setErrorPopup(err, active) {\r\n    setError({ ...error, errorText: err, isActive: active });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    function handleOverlayClick(evt) {\r\n      if (\r\n        evt.target.classList.contains(\"popup\") &&\r\n        !evt.target.classList.contains(\"popup_type_auth\")\r\n      ) {\r\n        if (isSuccessInfoToolTip) {\r\n          closeInfoToolTipPopup();\r\n        } else {\r\n          closeAllPopups();\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleOverlayClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleOverlayClick);\r\n    };\r\n  }, [isSuccessInfoToolTip]);\r\n\r\n  React.useEffect(() => {\r\n    function handleEscapeClick(evt) {\r\n      if (\r\n        (evt.key === \"Escape\" &&\r\n          (evt.target.classList.contains(\"popup__btn-submit_type_auth\") ||\r\n            evt.target.classList.contains(\"popup__input_type_auth\"))) ||\r\n        (evt.key === \"Escape\" &&\r\n          location.pathname !== \"/sign-up\" &&\r\n          location.pathname !== \"/sign-in\")\r\n      ) {\r\n        if (isSuccessInfoToolTip) {\r\n          closeInfoToolTipPopup();\r\n        } else {\r\n          closeAllPopups();\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener(\"keyup\", handleEscapeClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keyup\", handleEscapeClick);\r\n    };\r\n  }, [\r\n    isSuccessInfoToolTip,\r\n    isEditAvatarPopupOpen,\r\n    isAddPlacePopupOpen,\r\n    isEditProfilePopupOpen,\r\n    selectedCard,\r\n  ]);\r\n\r\n  function handleCheckToken() {\r\n    setIsLoading(true);\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    if (jwt) {\r\n      api\r\n        .checkToken(jwt)\r\n        .then((res) => {\r\n          setUserEmail(res.data.email);\r\n          setIsLoggedIn(true);\r\n          setIsLoading(false);\r\n          history.push(\"/\");\r\n        })\r\n        .catch(() => {\r\n          setIsSuccessInfoToolTip(false);\r\n          setInfoToolTipPopupOpen(true);\r\n        });\r\n    } else {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleRegister(data) {\r\n    api\r\n      .register(data)\r\n      .then((res) => {\r\n        setUserEmail(res.data.email);\r\n        setUserPassword(data.password);\r\n        setIsSuccessInfoToolTip(true);\r\n        setInfoToolTipPopupOpen(true);\r\n      })\r\n      .catch(() => {\r\n        setIsSuccessInfoToolTip(false);\r\n        setInfoToolTipPopupOpen(true);\r\n      });\r\n  }\r\n\r\n  function handleLogin(data) {\r\n    api\r\n      .login(data)\r\n      .then((res) => {\r\n        localStorage.setItem(\"jwt\", res.token);\r\n        handleCheckToken();\r\n      })\r\n      .catch(() => {\r\n        setIsSuccessInfoToolTip(false);\r\n        setInfoToolTipPopupOpen(true);\r\n      });\r\n  }\r\n\r\n  function handleSignOut() {\r\n    setIsLoggedIn(false);\r\n    history.push(\"/sign-in\");\r\n    localStorage.removeItem(\"jwt\");\r\n    setUserEmail(\"\");\r\n    setUserPassword(\"\");\r\n    setIsSuccessInfoToolTip(null);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header\r\n          isLoggedIn={isLoggedIn}\r\n          userEmail={userEmail}\r\n          onSignOut={handleSignOut}\r\n          isLoading={isLoading}\r\n        />\r\n        <Switch>\r\n          <ProtectedRoute\r\n            exact\r\n            path=\"/\"\r\n            component={Main}\r\n            isLoggedIn={isLoggedIn}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={confirmCardDelete}\r\n          />\r\n\r\n          <Route path=\"/sign-up\">\r\n            <Register\r\n              isOpen={true}\r\n              onRegister={handleRegister}\r\n              buttonSubmitText={\"Зарегистрироваться\"}\r\n            />\r\n          </Route>\r\n          <Route path=\"/sign-in\">\r\n            <Login\r\n              isOpen={true}\r\n              onLogin={handleLogin}\r\n              buttonSubmitText={\"Войти\"}\r\n              isLoading={isLoading}\r\n            />\r\n          </Route>\r\n\r\n          <Route>\r\n            <Redirect to={!isLoggedIn ? \"/sign-in\" : \"/\"} />\r\n          </Route>\r\n        </Switch>\r\n\r\n        <Footer isLoggedIn={isLoggedIn} />\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          buttonSubmitText={submitTextProfilePopup}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          buttonSubmitText={submitTextAvatarPopup}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddCard}\r\n          buttonSubmitText={submitTextAddPlacePopup}\r\n        />\r\n\r\n        <ConfirmDeletePopup\r\n          isOpen={isConfirmDeletePopupOpen}\r\n          card={cardToRemove}\r\n          onClose={closeAllPopups}\r\n          onSubmitDelete={handleCardDelete}\r\n          buttonSubmitText={submitTextConfirmDeletePopup}\r\n        />\r\n\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n\r\n        <ErrorPopup errorText={error.errorText} isActive={error.isActive} />\r\n\r\n        <InfoToolTip\r\n          isOpen={isInfoToolTipPopupOpen}\r\n          onClose={closeInfoToolTipPopup}\r\n          isSuccess={isSuccessInfoToolTip}\r\n          isToolTipForm={true}\r\n        />\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.querySelector('.root')\r\n);\r\n"],"sourceRoot":""}