{"version":3,"sources":["images/headerlogo.svg","components/Header.js","utils/useFormAndValidation.js","components/AuthForm.js","components/CssLoader.js","components/Login.js","components/Register.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ImagePopup.js","components/ErrorPopup.js","components/InfoToolTip.js","utils/utils.js","utils/api.js","utils/auth.js","components/ProtectedRoute.js","components/App.js","index.js"],"names":["Header","isLoggedIn","userEmail","onSignOut","isLoading","location","useLocation","isLocationSignIn","pathname","isLocationMain","React","useState","isColumnMenu","setColumnMenu","className","src","headerLogo","alt","onClick","type","aria-label","activeClassName","to","useFormAndValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","evt","target","name","value","validationMessage","closest","checkValidity","AuthForm","title","buttonSubmitText","onSubmit","isLocationSignUp","useEffect","preventDefault","email","password","noValidate","placeholder","required","minLength","maxLength","onChange","disabled","CssLoader","memo","Login","onLogin","Register","onRegister","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardButtonRemoveClassName","isLiked","likes","some","userWhoLiked","cardButtonLikeClassName","link","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","style","backgroundImage","avatar","about","map","Footer","PopupWithForm","children","isOpen","onClose","buttonSubmitState","EditProfilePopup","onUpdateUser","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","ConfirmDeletePopup","onSubmitDelete","ImagePopup","ErrorPopup","errorText","isActive","InfoToolTip","isSuccess","baseUrl","api","this","_baseUrl","res","ok","json","Promise","reject","status","fetch","credentials","then","_checkResponse","user","method","headers","body","JSON","stringify","likeCardStatus","auth","token","ProtectedRoute","Component","component","props","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isConfirmDeletePopupOpen","setConfirmDeletePopupOpen","isInfoToolTipPopupOpen","setInfoToolTipPopupOpen","isSuccessInfoToolTip","setIsSuccessInfoToolTip","selectedCard","setSelectedCard","error","setError","setCurrentUser","setUserEmail","userPassword","setUserPassword","setCards","cardToRemove","setCardToRemove","setIsLoggedIn","setIsLoading","history","useHistory","checkImage","resolve","img","document","createElement","onload","onerror","remove","closeInfoToolTipPopup","closeAllPopups","handleLogin","setErrorPopup","err","active","handleCheckToken","jwt","localStorage","getItem","checkToken","data","push","catch","login","setItem","all","getUserInfo","getCards","userData","setTimeout","handleOverlayClick","classList","contains","handleEscapeClick","key","addEventListener","removeEventListener","Provider","removeItem","exact","path","changeLikeCardStatus","cardWithChangedLike","cardFromState","register","setUserInfo","updatedUser","changeAvatar","postCard","newCard","deleteCard","filter","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.1abad392.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/headerlogo.bbe2a6ea.svg\";","import React from \"react\";\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\nimport headerLogo from \"../images/headerlogo.svg\";\r\n\r\n\r\nfunction Header({isLoggedIn, userEmail, onSignOut, isLoading}) {\r\n\r\n  const location = useLocation();\r\n  const isLocationSignIn = location.pathname === '/sign-in';\r\n  const isLocationMain = location.pathname === '/';\r\n  const [isColumnMenu, setColumnMenu] = React.useState(false);\r\n\r\n  function handleSignOut() {\r\n    onSignOut();\r\n    setColumnMenu(false);\r\n  }\r\n\r\n  function handleSignIn() {\r\n  }\r\n\r\n  function handleMenuClick() {\r\n    setColumnMenu(true);\r\n  }\r\n\r\n  function handleCloseMenu() {\r\n    setColumnMenu(false);\r\n  }\r\n\r\n  return (\r\n    <header className={`header ${!isColumnMenu ? \"page__container\" : \"\"} ${isColumnMenu ? \"header_columned\" : \"\"}`}>\r\n      <div className={`header__logo-container ${isColumnMenu ? \"header__logo-container_type_column\" : \"\"}`}>\r\n      <img\r\n        className=\"header__logo appear\"\r\n        src={headerLogo}\r\n        alt=\"Логотип сайта с надписью Место Россия английскими буквами\"\r\n      />\r\n      <button onClick={handleCloseMenu} type=\"button\" aria-label=\"Закрыть меню\" className={`btn-close btn-close_place_header ${isColumnMenu ? \"btn-close_active\" : \"\"}`}></button>\r\n      </div>\r\n      <div onClick={handleMenuClick} className= {`header__btn-menu ${(!isLoggedIn || isColumnMenu) ? \"header__btn-menu_type_inactive\" : \"\"}`}>\r\n        <div className=\"header__burger-line\"></div>\r\n        <div className=\"header__burger-line\"></div>\r\n        <div className=\"header__burger-line\"></div>\r\n      </div>\r\n      { (!isLoading || isLocationMain) &&\r\n      <nav className={`header__nav-container appear ${isLoggedIn && !isColumnMenu ? \"header__nav-container_type_inactive\" : \"\"} ${isColumnMenu ? \"header__nav-container_type_column\" : \"\"} `}>\r\n        <p className=\"header__email\">{isLoggedIn ? userEmail : \"\"}</p>\r\n          {!isLocationSignIn ?\r\n          <NavLink onClick={!isLoggedIn ? handleSignIn : handleSignOut} className={`header__nav-item ${isLocationMain ? \"header__nav-item_active\" : \"\"}`} to={\"/sign-in\"}>{isLoggedIn ? \"Выйти\" : \"Войти\"}</NavLink>\r\n          :\r\n          <NavLink className=\"header__nav-item\" activeClassName=\"header_nav-item_active\" to={\"/sign-up\"}>{!isLoggedIn ? \"Регистрация\" : \"\"}</NavLink>\r\n          }\r\n      </nav>\r\n      }\r\n\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","\r\nimport {useState, useCallback} from 'react';\r\n\r\nexport function useFormAndValidation() {\r\n  const [ values, setValues ] = useState({});\r\n  const [ errors, setErrors ] = useState({});\r\n  const [ isValid, setIsValid ] = useState(true);\r\n  \r\n  function handleChange(evt) {\r\n    const {name, value} = evt.target;\r\n    setValues({...values, [name]: value });\r\n    setErrors({...errors, [name]: evt.target.validationMessage});\r\n    setIsValid(evt.target.closest('form').checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback((newValues = {}, newErrors = {}, newIsValid  = false) => {\r\n    setValues(newValues);\r\n    setErrors(newErrors);\r\n    setIsValid(newIsValid);\r\n  }, [setValues, setErrors, setIsValid]);\r\n\r\n  return { values, handleChange, errors, isValid, resetForm, setValues, setErrors, setIsValid };\r\n}\r\n","import React from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport {useFormAndValidation} from \"../utils/useFormAndValidation.js\";\r\n\r\nfunction AuthForm({\r\n  title,\r\n  name,\r\n  buttonSubmitText,\r\n  onSubmit,\r\n}) {\r\n  const location = useLocation();\r\n  const isLocationSignUp = location.pathname === \"/sign-up\";\r\n  const {values, handleChange, errors, isValid, resetForm} = useFormAndValidation();\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n  }, []);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onSubmit({email: values.email, password: values.password})\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth page__container appear\">\r\n        <h2 className=\"title title_place_auth\">{title}</h2>\r\n\r\n        <form\r\n          className=\"form\"\r\n          name={`form-edit-${name}`}\r\n          onSubmit={handleSubmit}\r\n          noValidate\r\n        >\r\n        <fieldset className=\"form__set\">\r\n        <label className=\"form__field\">\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={values.email || \"\"}\r\n            placeholder=\"Email\"\r\n            className={`form__input form__input_type_auth ${errors.email ? 'form__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`form__input-error ${errors.email ? 'form__input-error_active' : ''}`}>{errors.email}</span>\r\n        </label>\r\n        <label className=\"form__field\">\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={values.password || \"\"}\r\n            placeholder=\"Пароль\"\r\n            className={`form__input form__input_type_auth ${errors.password ? 'form__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"8\"\r\n            maxLength=\"40\"\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`form__input-error ${errors.password ? 'form__input-error_active' : ''}`}>{errors.password}</span>\r\n        </label>\r\n      </fieldset>\r\n          \r\n          {\r\n            <button\r\n            type=\"submit\"\r\n            className={`form__btn-submit form__btn-submit_type_auth ${!isValid ? \"form__btn-submit_inactive\" : \"\"}`}\r\n            disabled={!isValid ? true : \"\"}\r\n            >\r\n            {buttonSubmitText}\r\n          </button>\r\n          }\r\n          {isLocationSignUp && (\r\n            <div className=\"form__auth-container\">\r\n              <p className=\"form__auth-text\">Уже зарегистрированы?&nbsp;</p>\r\n              <Link className=\"form__auth-link\" to={\"/sign-in\"}>Войти</Link>\r\n            </div>\r\n          )}\r\n        </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AuthForm;\r\n","import React from 'react';\r\nconst CssLoader = React.memo(({isLoading})=>{\r\n  return (\r\n    isLoading && (\r\n      <div className=\"cssload\">\r\n        <div className=\"cssload__whirlpool\"></div>\r\n      </div>\r\n      )\r\n  );\r\n})\r\n\r\nexport default CssLoader;","import React from \"react\";\r\nimport AuthForm from \"./AuthForm\";\r\nimport CssLoader from \"./CssLoader.js\";\r\n\r\nfunction Login({ onLogin, isLoading }) {\r\n\r\n  return (\r\n    <>\r\n    <CssLoader isLoading={isLoading} />\r\n    {!isLoading && \r\n    <AuthForm\r\n      title=\"Вход\"\r\n      name=\"login\"\r\n      buttonSubmitText=\"Войти\"\r\n      onSubmit={onLogin}\r\n    />\r\n    }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport AuthForm from \"./AuthForm\";\r\n\r\nfunction Register({ onRegister }) {\r\n\r\n  return (\r\n    <AuthForm\r\n      title=\"Регистрация\"\r\n      name=\"register\"\r\n      buttonSubmitText=\"Зарегистрироваться\"\r\n      onSubmit={onRegister}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardButtonRemoveClassName = `cards__btn-remove ${isOwn ? 'cards__btn-remove_active': ''}`;\r\n\r\n  const isLiked = card.likes.some((userWhoLiked)=>userWhoLiked._id === currentUser._id);\r\n  const cardButtonLikeClassName = `cards__btn-like ${isLiked ? 'cards__btn-like_active appear': ''}`;\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"cards__item appear\">\r\n      <img\r\n        className=\"cards__image\"\r\n        src={`${card.link}`}\r\n        alt={`Изображение ${card.name}`}\r\n        onClick={handleClick}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Удалить\"\r\n        className={cardButtonRemoveClassName}\r\n        onClick={handleDeleteClick}\r\n      ></button>\r\n      <div className=\"cards__description\">\r\n        <h2 className=\"cards__title text-cut\">{card.name}</h2>\r\n        <div className=\"cards__likes-container\">\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Нравится\"\r\n            className={cardButtonLikeClassName}\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <div className=\"cards__likes-counter appear\">{card.likes.length}</div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport \"../index.css\";\r\nimport Card from \"./Card.js\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Main({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete }) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile page__container\">\r\n        <div\r\n          className=\"profile__avatar appear\"\r\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n          onClick={onEditAvatar}\r\n        ></div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__container\">\r\n            <h1 className=\"profile__name appear text-cut\">{currentUser.name}</h1>\r\n            <button type=\"button\" aria-label=\"Редактировать\" className=\"profile__btn-edit\" onClick={onEditProfile}></button>\r\n          </div>\r\n          <p className=\"profile__about appear text-cut\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" aria-label=\"Добавить\" className=\"profile__btn-add\" onClick={onAddPlace}> </button>\r\n      </section>\r\n\r\n      <section className=\"places page__container\">\r\n        <ul className=\"cards\">\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card key={card._id} card={card} onCardClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete}/>\r\n            );\r\n          })}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\nconst Footer = React.memo(() => {\r\n  return (\r\n    <footer className=\"footer page__container\">\r\n      <p className=\"footer__author\">&copy; 2021 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n});\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm({\r\n  title,\r\n  name,\r\n  buttonSubmitText,\r\n  children,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  buttonSubmitState,\r\n}) {\r\n\r\n  return (\r\n    <div\r\n      className={`popup ${isOpen ? \"popup_opened\" : \"\"}`}\r\n    >\r\n      <div className=\"popup__container popup__container_form\">\r\n        <h2 className=\"title\">{title}</h2>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"btn-close btn-close_place_popup\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <form\r\n          className=\"form\"\r\n          name={`form-edit-${name}`}\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n        >\r\n          {children}\r\n          <button\r\n          type=\"submit\"\r\n          className={`form__btn-submit ${!buttonSubmitState ? \"form__btn-submit_inactive\" : \"\"}`}\r\n          disabled={!buttonSubmitState ? true : \"\"}\r\n          >\r\n          {buttonSubmitText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport {useFormAndValidation} from \"../utils/useFormAndValidation.js\";\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading }) {\r\n\r\n  const {values,handleChange, errors, isValid, resetForm} = useFormAndValidation();\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    resetForm(currentUser);\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser({name: values.name, about: values.about})\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Редактировать профиль\"\r\n      name=\"profile\"\r\n      buttonSubmitText={isLoading? \"Сохранение...\" : \"Сохранить\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={isValid}\r\n    >\r\n      <fieldset className=\"form__set\">\r\n        <label className=\"form__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={values.name || \"\"}\r\n            placeholder=\"Имя\"\r\n            className={`form__input ${errors.name ? 'form__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`form__input-error ${errors.name ? 'form__input-error_active' : ''}`}>{errors.name}</span>\r\n        </label>\r\n        <label className=\"form__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"about\"\r\n            value={values.about || \"\"}\r\n            placeholder=\"О себе\"\r\n            className={`form__input ${errors.about ? 'form__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`form__input-error ${errors.about ? 'form__input-error_active' : ''}`}>{errors.about}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport {useFormAndValidation} from \"../utils/useFormAndValidation.js\";\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n  \r\n  const {values, handleChange, errors, isValid, resetForm} = useFormAndValidation();\r\n\r\n  React.useEffect(() => {\r\n    resetForm({link:''});\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateAvatar({avatar: values.link});\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Обновить аватар\"\r\n      name=\"avatar\"\r\n      buttonSubmitText={isLoading? \"Сохранение...\" : \"Сохранить\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState={isValid}\r\n    >\r\n      <fieldset className=\"form__set\">\r\n        <label className=\"form__field\">\r\n          <input\r\n            type=\"url\"\r\n            name=\"link\"\r\n            value={values.link || \"\"}\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`form__input ${errors.link ? 'form__input_type_error' : ''}`}\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`form__input-error ${errors.link ? 'form__input-error_active' : ''}`}>{errors.link}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\nimport {useFormAndValidation} from \"../utils/useFormAndValidation.js\";\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isLoading }) {\r\n\r\n  const {values, handleChange, errors, isValid, resetForm} = useFormAndValidation();\r\n\r\n  React.useEffect(()=> {\r\n    resetForm({title:'', link:''});\r\n  },[isOpen])\r\n\r\n  function handleAddPlaceSubmit(evt) {\r\n    evt.preventDefault();\r\n    onAddPlace({ name:values.title, link:values.link }); \r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Новое место\"\r\n      name=\"card\"\r\n      buttonSubmitText={isLoading? \"Добавление...\" : \"Сохранить\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleAddPlaceSubmit}\r\n      buttonSubmitState={isValid}\r\n    >\r\n      <fieldset className=\"form__set\">\r\n        <label className=\"form__field\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={values.title || \"\"}\r\n            placeholder=\"Название\"\r\n            className={`form__input ${errors.title ? 'form__input_type_error' : ''}`}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"30\"\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`form__input-error ${errors.title ? 'form__input-error_active' : ''}`}>{errors.title}</span>\r\n        </label>\r\n        <label className=\"form__field\">\r\n          <input\r\n            type=\"url\"\r\n            name=\"link\"\r\n            value={values.link || \"\"}\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`form__input ${errors.link ? 'form__input_type_error' : ''}`}\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`form__input-error ${errors.link ? 'form__input-error_active' : ''}`}>{errors.link}</span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction ConfirmDeletePopup({isOpen, onClose, card, onSubmitDelete, isLoading }) {\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onSubmitDelete(card);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Вы уверены?\"\r\n      name=\"remove\"\r\n      buttonSubmitText={isLoading? \"Удаление...\" : \"Да\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonSubmitState=\"true\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmDeletePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_img ${\r\n        card.link ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"btn-close btn-close_place_popup\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <figure className=\"popup__figure\">\r\n          <img className=\"popup__image\" src={`${card.link}`} alt={`Изображение ${card.name}`} />\r\n          <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from \"react\";\r\n\r\nfunction ErrorPopup({ errorText, isActive }) {\r\n  return (\r\n    <div className={`error-popup ${isActive ? \"error-popup_opened\" : \"\"} `}>\r\n      <h2 className=\"error-popup__title\">Что-то пошло не так...</h2>\r\n      <p className=\"error-popup__text\">{errorText}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorPopup;\r\n","import React from 'react';\r\n\r\nfunction InfoToolTip({isOpen, isSuccess, onClose}) {\r\n  return (\r\n    <div className={`popup ${isOpen ? \"popup_opened\" : \"\"}`}>\r\n        <div className=\"popup__container popup__container_form\">\r\n            <div className={`popup__tooltip-image ${!isSuccess ? \"popup__tooltip-image_type_fail\" : \"\"}`}></div>\r\n            <h2 className=\"title title_place_auth\">{!isSuccess ? \"Что-то пошло не так! Попробуйте еще раз.\" : \"Вы успешно зарегистрировались!\" }</h2>\r\n            <button\r\n            type=\"button\"\r\n            aria-label=\"Закрыть\"\r\n            className=\"btn-close btn-close_place_tooltip\"\r\n            onClick={onClose}\r\n            ></button>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoToolTip;\r\n","const baseUrl = \"https://mesto.nomoreparties.co/v1\";\r\n\r\nexport default baseUrl;","import baseUrl from \"./utils.js\";\r\nclass Api {\r\n  constructor(baseUrl) {\r\n    this._baseUrl = baseUrl;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      credentials: 'include',\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      credentials: 'include',\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  setUserInfo(user) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      credentials: 'include',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: user.name,\r\n        about: user.about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  postCard(card) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      credentials: 'include',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: card.name,\r\n        link: card.link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  deleteCard(card) {\r\n    return fetch(`${this._baseUrl}/cards/${card._id}`, {\r\n      method: \"DELETE\",\r\n      credentials: 'include',\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(card, likeCardStatus) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${card._id}`, {\r\n      method: (likeCardStatus ? \"PUT\": \"DELETE\"),\r\n      credentials: 'include',\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCountsOfLikes(card) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${card._id}`, {\r\n      credentials: 'include',\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeAvatar(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      credentials: 'include',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api(baseUrl);\r\nexport default api;\r\n","import baseUrl from \"./utils.js\";\r\nclass Auth {\r\n  constructor(baseUrl) {\r\n    this._baseUrl = baseUrl;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n  }\r\n\r\n  register({email, password}) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  login({email, password}) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      credentials: 'include',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst auth = new Auth(baseUrl);\r\nexport default auth;\r\n","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({ component: Component, ...props }) {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React from \"react\";\r\nimport {\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport \"../index.css\";\r\nimport Header from \"./Header.js\";\r\nimport Login from \"./Login.js\";\r\nimport Register from \"./Register.js\";\r\nimport Main from \"./Main.js\";\r\nimport Footer from \"./Footer.js\";\r\nimport EditProfilePopup from \"./EditProfilePopup.js\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup.js\";\r\nimport AddPlacePopup from \"./AddPlacePopup.js\";\r\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup.js\";\r\nimport ImagePopup from \"./ImagePopup.js\";\r\nimport ErrorPopup from \"./ErrorPopup.js\";\r\nimport InfoToolTip from \"./InfoToolTip\";\r\nimport api from \"../utils/api.js\";\r\nimport auth from \"../utils/auth.js\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\nimport ProtectedRoute from \"./ProtectedRoute.js\";\r\n\r\nfunction App() {\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(\r\n    false\r\n  );\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = React.useState(\r\n    false\r\n  );\r\n\r\n  const [isInfoToolTipPopupOpen, setInfoToolTipPopupOpen] = React.useState(\r\n    false\r\n  );\r\n  const [isSuccessInfoToolTip, setIsSuccessInfoToolTip] = React.useState(null);\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [error, setError] = React.useState({ errorText: \"\", isActive: false });\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [userEmail, setUserEmail] = React.useState(\"\");\r\n  const [userPassword, setUserPassword] = React.useState(\"\");\r\n  const [cards, setCards] = React.useState([]);\r\n  const [cardToRemove, setCardToRemove] = React.useState({});\r\n  const [isLoggedIn, setIsLoggedIn] = React.useState(null);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const history = useHistory();\r\n  \r\n  React.useEffect(() => {\r\n    handleCheckToken();\r\n    setIsSuccessInfoToolTip(false);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getUserInfo(), api.getCards()])\r\n      .then(([userData, cards]) => {\r\n        setCurrentUser(userData);\r\n        setCards(cards);\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }, []);\r\n\r\n  function handleUpdateUser(user) {\r\n    setIsLoading(true);\r\n    api\r\n      .setUserInfo(user)\r\n      .then((updatedUser) => {\r\n        setCurrentUser({\r\n          ...currentUser,\r\n          name: updatedUser.name,\r\n          about: updatedUser.about,\r\n        });\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    checkImage(avatar)\r\n      .then(() => {\r\n        setIsLoading(true);\r\n        api.changeAvatar(avatar).then((updatedUser) => {\r\n          setCurrentUser({ ...currentUser, avatar: updatedUser.avatar });\r\n          closeAllPopups();\r\n        });\r\n      })\r\n      .catch(() => {\r\n        setErrorPopup(\"Ошибка адреса\", true);\r\n        setTimeout(() => setErrorPopup(\"Ошибка адреса\", false), 5000);\r\n      });\r\n  }\r\n\r\n  function checkImage(link) {\r\n    return new Promise((resolve, reject) => {\r\n      const img = document.createElement(\"img\");\r\n      img.src = link;\r\n      img.onload = resolve;\r\n      img.onerror = reject;\r\n      img.remove();\r\n    });\r\n  }\r\n\r\n  function handleAddCard(card) {\r\n    checkImage(card.link)\r\n      .then(() => {\r\n        setIsLoading(true);\r\n        api.postCard(card).then((newCard) => {\r\n          setCards([newCard, ...cards]);\r\n          closeAllPopups();\r\n        });\r\n      })\r\n      .catch(() => {\r\n        setErrorPopup(\"Ошибка адреса\", true);\r\n        setTimeout(() => setErrorPopup(\"Ошибка адреса\", false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(\r\n      (userWhoLiked) => userWhoLiked._id === currentUser._id\r\n    );\r\n    api\r\n      .changeLikeCardStatus(card, !isLiked)\r\n      .then((cardWithChangedLike) => {\r\n        setCards(\r\n          cards.map((cardFromState) =>\r\n            cardFromState._id === card._id ? cardWithChangedLike : cardFromState\r\n          )\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    setIsLoading(true);\r\n    api\r\n      .deleteCard(card)\r\n      .then(() => {\r\n        setCards(\r\n          cards.filter((cardFromState) => cardFromState._id !== card._id)\r\n        );\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        setErrorPopup(err, true);\r\n        setTimeout(() => setErrorPopup(err, false), 5000);\r\n      });\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsLoading(false);\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsLoading(false);\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsLoading(false);\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function confirmCardDelete(card) {\r\n    setIsLoading(false);\r\n    setCardToRemove(card);\r\n    setConfirmDeletePopupOpen(true);\r\n  }\r\n\r\n  function closeInfoToolTipPopup() {\r\n    closeAllPopups();\r\n    if (isSuccessInfoToolTip) {\r\n      handleLogin({ email: userEmail, password: userPassword });\r\n    }\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setEditAvatarPopupOpen(false);\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setConfirmDeletePopupOpen(false);\r\n    setInfoToolTipPopupOpen(false);\r\n    setSelectedCard({});\r\n    setCardToRemove({});\r\n  }\r\n\r\n  function setErrorPopup(err, active) {\r\n    setError({ ...error, errorText: err, isActive: active });\r\n  }\r\n\r\n\r\n  React.useEffect(() => {\r\n    function handleOverlayClick(evt) {\r\n      if (evt.target.classList.contains(\"popup\")) {\r\n        if (isSuccessInfoToolTip) {\r\n          closeInfoToolTipPopup();\r\n        } else {\r\n          closeAllPopups();\r\n        }\r\n      }\r\n    }\r\n\r\n    function handleEscapeClick(evt) {\r\n      if (evt.key === \"Escape\") {\r\n        if (isSuccessInfoToolTip) {\r\n          closeInfoToolTipPopup();\r\n        } else {\r\n          closeAllPopups();\r\n        }\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"mousedown\", handleOverlayClick);\r\n    document.addEventListener(\"keyup\", handleEscapeClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleOverlayClick);\r\n      document.removeEventListener(\"keyup\", handleEscapeClick);\r\n    };\r\n  }, [\r\n    isSuccessInfoToolTip,\r\n    isEditAvatarPopupOpen,\r\n    isAddPlacePopupOpen,\r\n    isEditProfilePopupOpen,\r\n    selectedCard,\r\n  ]);\r\n\r\n  function handleCheckToken() {\r\n    setIsLoading(true);\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    if (jwt) {\r\n      auth\r\n        .checkToken(jwt)\r\n        .then((res) => {\r\n          setUserEmail(res.data.email);\r\n          setIsLoggedIn(true);\r\n          setIsLoading(false);\r\n          history.push(\"/\");\r\n        })\r\n        .catch(() => {\r\n          setIsSuccessInfoToolTip(false);\r\n          setInfoToolTipPopupOpen(true);\r\n        });\r\n    } else {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleRegister(data) {\r\n    auth\r\n      .register(data)\r\n      .then((res) => {\r\n        setUserEmail(res.data.email);\r\n        setUserPassword(data.password);\r\n        setIsSuccessInfoToolTip(true);\r\n        setInfoToolTipPopupOpen(true);\r\n      })\r\n      .catch(() => {\r\n        setIsSuccessInfoToolTip(false);\r\n        setInfoToolTipPopupOpen(true);\r\n      });\r\n  }\r\n\r\n  function handleLogin(data) {\r\n    auth\r\n      .login(data)\r\n      .then((res) => {\r\n        localStorage.setItem(\"jwt\", res.token);\r\n        handleCheckToken();\r\n      })\r\n      .catch(() => {\r\n        setIsSuccessInfoToolTip(false);\r\n        setInfoToolTipPopupOpen(true);\r\n      });\r\n  }\r\n\r\n  function handleSignOut() {\r\n    setIsLoggedIn(false);\r\n    history.push(\"/sign-in\");\r\n    localStorage.removeItem(\"jwt\");\r\n    setUserEmail(\"\");\r\n    setUserPassword(\"\");\r\n    setIsSuccessInfoToolTip(null);\r\n    setIsLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header\r\n          isLoggedIn={isLoggedIn}\r\n          userEmail={userEmail}\r\n          onSignOut={handleSignOut}\r\n          isLoading={isLoading}\r\n        />\r\n        <Switch>\r\n          <ProtectedRoute\r\n            exact\r\n            path=\"/\"\r\n            component={Main}\r\n            isLoggedIn={isLoggedIn}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={confirmCardDelete}\r\n          />\r\n\r\n          <Route path=\"/sign-up\">\r\n            <Register\r\n              onRegister={handleRegister}\r\n            />\r\n          </Route>\r\n          <Route path=\"/sign-in\">\r\n            <Login\r\n              onLogin={handleLogin}\r\n              isLoading={isLoading}\r\n            />\r\n          </Route>\r\n\r\n          <Route>\r\n            <Redirect to={!isLoggedIn ? \"/sign-in\" : \"/\"} />\r\n          </Route>\r\n        </Switch>\r\n\r\n        <Footer isLoggedIn={isLoggedIn} />\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          isLoading={isLoading}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          isLoading={isLoading}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddCard}\r\n          isLoading={isLoading}\r\n        />\r\n        \r\n        <ConfirmDeletePopup\r\n          isOpen={isConfirmDeletePopupOpen}\r\n          card={cardToRemove}\r\n          onClose={closeAllPopups}\r\n          onSubmitDelete={handleCardDelete}\r\n          isLoading={isLoading}\r\n        />\r\n\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n\r\n        <ErrorPopup errorText={error.errorText} isActive={error.isActive} />\r\n\r\n        <InfoToolTip\r\n          isOpen={isInfoToolTipPopupOpen}\r\n          onClose={closeInfoToolTipPopup}\r\n          isSuccess={isSuccessInfoToolTip}\r\n        />\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\n//Чтобы осуществлялась перезагрузка страницы в gh-pages нужно вместо browserrouter поставить hashrouter и адрес будет с #\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.querySelector('.root')\r\n);\r\n"],"sourceRoot":""}